<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-8">
        <title>jQuery.parseXML demo</title>
          <link rel="stylesheet" href="css/cta.css">
          <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
          <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
            <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
            <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    </head>
<body>
<h1> Bus routes</h1>

  <div id="Northbound"></div>
  <div id="Eastbound"></div>
  <div id="Southbound"></div>
  <div id="Westbound"></div>
  
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
        /*global $*/
        $(function() {
          
          var apiPassThruUrl = "https://polar-garden-75406.herokuapp.com/apiPassThru.php";
          var apiEndpoint = "http://ctabustracker.com/bustime/api/v2/getpredictions";
          
          $.ajax({
              url: apiPassThruUrl,
              dataType: "json",
              method: 'GET',
              data: {"apiEndpoint": apiEndpoint,
                      "key" : "iVHFWjskWDBSqVt3iXkNrf6xa",
                      "format":"json",
                      "rt": "152,49",
                      "stpid": "12571,12525,8417,8195"
                    }
            }).done (function (data) {
              console.log(data);
              
              $("#Northbound").append(
                "<h2>" + "<i>" + "Northbound" + "</i>" + "</h2>"
              );
              
              $("#Eastbound").append(
                "<h2>" + "<i>" + "Eastbound" + "</i>" + "</h2>"
              );
              
              $("#Southbound").append(
                "<h2>" + "<i>" + "Southbound" + "</i>" + "</h2>"
              );
              
              $("#Westbound").append(
                "<h2>" + "<i>" + "Westbound" + "</i>" + "</h2>"
              );
              
              $.each(data["bustime-response"]["prd"], function(i,v) {
                  $("#"+ v.rtdir).append(
                    "<p>" + "Route Number:" + v.rt + "<br>"
                    + "Stop:" + v.stpnm + "<br>"
                    + "Predicted Time (YYYY:MM:DD HH:MM): " + v.prdtm + "<br>"
                    + "Time Remaining (Minutes): " + v.prdctdn + "</p>"
                  );
                
              });

            });
        });

    </script>
 
</body>
</html>